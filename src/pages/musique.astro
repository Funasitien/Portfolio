---
import Layout from "../layouts/main.astro";
import List from "../components/SoundcloudList.astro";
import { Icon } from "astro-icon/components";
---

<Layout>
  <div
  transition:animate="none"
  class="flex flex-col md:flex-row justify-center px-2 pb-16 md:px-20 md:py-8 z-20 w-full gap-12 md:h-screen">
      <div id="bdiv" class="flex flex-col w-full md:w-3/5 z-30 md:h-4/5 md:h-full">
        <div class="flex w-full text-2xl md:text-4xl font-bold items-center gap-4">
          <img
              src="/icons/disc.png"
              class="w-12 h-12 md:w-16 md:h-16"
              alt="Music Disc Icon (hand draw, pixel)"
            />
            Musiques
        </div>
        <ul
          class="list block bg-base-100 rounded-box shadow-md overflow-auto w-full h-fit my-12"
        >
        <List
          titre = "Bule"
          description = 'Titre n°6 de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:chart-bubble-filled"
          icon_bg = "bg-sky-300 dark:bg-sky-900"
          link = "https://soundcloud.com/bydreamcloud/bule"
          data="1199421853">
          <div class="badge badge-xs badge-success">🍃 Chill Time</div>
        </List>
        <List
          titre = "LoVibe"
          description = 'Titre n°5 de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:plant"
          icon_bg = "bg-rose-200 dark:bg-rose-900"
          link = "https://soundcloud.com/bydreamcloud/lovibe"
          data="1199421838">
          <div class="badge badge-xs badge-success">🍃 Chill Time</div>
        </List>
        <List
          titre = "Néo"
          description = 'Titre n°4 de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:bolt"
          icon_bg = "bg-yellow-200 dark:bg-yellow-900"
          link = "https://soundcloud.com/bydreamcloud/néo"
          data="1199421808">
          <div class="badge badge-xs badge-success">🍃 Chill Time</div>
        </List>
        <List
          titre = "Slide"
          description = 'Titre n°3 de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:droplets"
          icon_bg = "bg-lime-200 dark:bg-lime-900"
          link = "https://soundcloud.com/bydreamcloud/slide"
          data="1199421796">
          <div class="badge badge-xs badge-success">🍃 Chill Time</div>
        </List>
        <List
          titre = "The B"
          description = 'Titre n°2 de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:hexagon-letter-b-filled"
          icon_bg = "bg-red-300 dark:bg-red-900"
          link = "https://soundcloud.com/bydreamcloud/the-b"
          data="1199421784">
          <div class="badge badge-xs badge-success">🍃 Chill Time</div>
        </List>
        <List
          titre = "Undertown"
          description = 'Titre n°1 de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:building-skyscraper"
          icon_bg = "bg-fuchsia-300 dark:bg-fuchsia-900"
          link = "https://soundcloud.com/bydreamcloud/undertown"
          data="1199421781">
          <div class="badge badge-xs badge-success">🍃 Chill Time</div>
        </List>
        <List
          titre = "Lovibe - Snow Edition"
          description = 'Titre bonus de la série "Chill Time". Réalisé en 2022'
          icon = "tabler:snowman"
          icon_bg = "bg-orange-300 dark:bg-orange-900"
          link = "https://soundcloud.com/bydreamcloud/lovibe-snow-edition"
          data="1200310972">
          <div class="badge badge-xs badge-warning">🍃 Chill Time Deluxe</div>
        </List>
        <List
          titre = "Untitled Mixtape"
          description = 'Projet de Mixtape (série de mix/remix) publié en 2023'
          icon = "tabler:blender"
          icon_bg = "bg-indigo-300 dark:bg-indigo-900"
          link = "https://soundcloud.com/bydreamcloud/mix-1"
          data="1231535308">
          <div class="badge badge-xs badge-secondary">🪐 DreamCloud's World</div>
        </List>
        </ul>
      </div>
      <div id="idiv" class="flex flex-col w-full md:w-1/3 z-30 sm:h-full h-96 max-md:hidden">
        <div class="">
          <div class="flex flex-row place-content-between">
            <span class="badge badge-primary badge-xl font-bold" id="title">
              Bule
            </span>
            <button class="btn btn-ghost btn-sm md:hidden" onclick="hideI()">
              <Icon name="tabler:arrow-big-left-filled" class="text-3xl" />
            </button>
          </div>
          <p id="description" class="p-2 text-base-content">
            Titre n°x de la série "Chill Time". Réalisé en 2022
          </p>
        </div>
        <div
          class="bg-base-300 mask mask-custom h-full w-full z-50 rounded-4xl text-base-content"
        >
          <iframe
            class="w-full h-full bg-base-100 shadow-md iframe"
            title="Musique Iframe Magiiique"
            frameborder="0"
            allowfullscreen
            allow="autoplay; fullscreen; xr-spatial-tracking"
            xr-spatial-tracking
            execution-while-out-of-viewport
            execution-while-not-rendered
            web-share
            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1199421853&color=%23ff5500&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=true"
            >
          </iframe>
        </div>
      </div>
    </div>
  </div>

  <script is:inline data-astro-rerun>
    const Mbuttons = document.querySelectorAll("button.core");
    const Miframe = document.querySelector(".iframe");
    const Midiv = document.querySelector("#idiv");
    const Mbdiv = document.querySelector("#bdiv");

    Mbuttons.forEach((button) => {
      button.addEventListener("click", () => {
        const coreValue = button.getAttribute("data-core");
        if (coreValue) {
          Miframe.src = coreValue;
          Mbdiv.classList.add("max-md:hidden")
          Midiv.classList.remove("max-md:hidden")
          document.querySelector("#title").innerHTML = button.getAttribute("data-titre");
          document.querySelector("#description").innerHTML = button.getAttribute("data-description");
        }
      });
    });

    function hideI() {
      Mbdiv.classList.remove("max-md:hidden")
      Midiv.classList.add("max-md:hidden")
    }
  </script>
</Layout>
